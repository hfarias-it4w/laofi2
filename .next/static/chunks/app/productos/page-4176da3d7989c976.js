(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4484],{4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var s=r(2115),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(i),o=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var s,i,n;s=e,i=t,n=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in s?Object.defineProperty(s,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[i]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:i,size:n,title:a}=e,d=function(e,t){if(null==e)return{};var r,s,i=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,o),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&s.createElement("title",null,a),e.children)};return void 0!==n?s.createElement(n.Consumer,null,e=>t(e)):t(i)}},5651:(e,t,r)=>{Promise.resolve().then(r.bind(r,7214))},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},7214:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),i=r(6766),n=r(2108),o=r(2115),l=r(5695),a=r(5305);function c(){let e=(0,l.useRouter)(),{data:t,status:r}=(0,n.useSession)(),c=null==t?void 0:t.user,[d,u]=(0,o.useState)([]),[m,x]=(0,o.useState)(!0),[p,g]=(0,o.useState)({name:"",price:"",description:"",image:""}),[h,b]=(0,o.useState)(null),[f,j]=(0,o.useState)(null),[y,v]=(0,o.useState)("");async function N(){x(!0);let e=await fetch("/api/productos");u(await e.json()),x(!1)}async function w(e){if(e.preventDefault(),v(""),!p.name||!p.price)return void v("Nombre y precio son obligatorios");let t=await fetch(h?"/api/productos/".concat(h):"/api/productos",{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p.name,price:Number(p.price),description:p.description,image:p.image})});if(!t.ok)return void v((await t.json()).message||"Error al guardar producto");g({name:"",price:"",description:"",image:""}),b(null),N()}async function O(e){if(!f)return void j(e);await fetch("/api/productos/".concat(e),{method:"DELETE"}),j(null),N()}return(0,o.useEffect)(()=>{N()},[]),"loading"===r?(0,s.jsx)("div",{className:"text-center mt-10 text-gray-500",children:"Cargando sesi\xf3n..."}):t?(null==c?void 0:c.role)!=="admin"?(0,s.jsxs)("div",{className:"flex flex-col items-center mt-10",children:[(0,s.jsx)("div",{className:"text-red-600 text-4xl mb-6",children:(0,s.jsx)(a.OrW,{})}),(0,s.jsx)("div",{className:"text-red-600 text-xl mb-6",children:"No ten\xe9s permisos para administrar productos."}),(0,s.jsx)("button",{className:"bg-[#13B29F] hover:bg-[#119e8d] text-white rounded-xl py-3 px-6 text-lg font-semibold transition-colors",onClick:()=>e.push("/"),children:"Volver al inicio"})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center flex-grow py-4 px-4 bg-white min-h-screen",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-[#3A3A3A] mb-2",children:"Administrador de Productos"}),(0,s.jsx)("p",{className:"mb-6 text-gray-700",children:"Aqu\xed puedes agregar, editar o eliminar productos del men\xfa."}),(0,s.jsxs)("form",{onSubmit:w,className:"flex flex-col items-center w-full max-w-2xl bg-white rounded-xl shadow-lg px-8 py-8 mb-8",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:h?"Editar producto":"Nuevo producto"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full mb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 mb-1",htmlFor:"nombre-input",children:"Nombre"}),(0,s.jsx)("input",{id:"nombre-input",type:"text",placeholder:"Nombre",className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#13B29F] text-lg",value:p.name,onChange:e=>g(t=>({...t,name:e.target.value}))})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 mb-1",htmlFor:"precio-input",children:"Precio"}),(0,s.jsx)("input",{id:"precio-input",type:"number",placeholder:"Precio",className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#13B29F] text-lg",value:p.price,onChange:e=>g(t=>({...t,price:e.target.value}))})]}),(0,s.jsxs)("div",{className:"flex flex-col md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 mb-1",htmlFor:"descripcion-input",children:"Descripci\xf3n"}),(0,s.jsx)("input",{id:"descripcion-input",type:"text",placeholder:"Descripci\xf3n",className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#13B29F] text-lg",value:p.description,onChange:e=>g(t=>({...t,description:e.target.value}))})]}),(0,s.jsxs)("div",{className:"flex flex-col md:col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-gray-600 mb-1",htmlFor:"image-input",children:"Imagen (URL)"}),(0,s.jsx)("input",{id:"image-input",type:"text",placeholder:"https://ejemplo.com/imagen.jpg",className:"border border-gray-300 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#13B29F] text-lg",value:p.image,onChange:e=>g(t=>({...t,image:e.target.value}))})]})]}),y&&(0,s.jsx)("div",{className:"text-red-600 mb-4 w-full text-center",children:y}),(0,s.jsxs)("div",{className:"flex gap-2 w-full justify-center",children:[(0,s.jsx)("button",{type:"submit",className:"bg-[#13B29F] hover:bg-[#119e8d] text-white rounded-xl py-3 px-6 text-lg font-semibold transition-colors",children:h?"Guardar cambios":"Agregar"}),h&&(0,s.jsx)("button",{type:"button",className:"bg-gray-400 text-white rounded-xl py-3 px-6 text-lg font-semibold hover:bg-gray-500 transition-colors",onClick:function(){g({name:"",price:"",description:"",image:""}),b(null)},children:"Cancelar"})]})]}),(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Listado de productos"}),(0,s.jsx)("div",{className:"overflow-x-auto w-full max-w-2xl",children:m?(0,s.jsx)("div",{className:"text-gray-500",children:"Cargando..."}):0===d.length?(0,s.jsx)("div",{className:"text-gray-500",children:"No hay productos registrados."}):(0,s.jsxs)("table",{className:"min-w-full border text-sm rounded-xl overflow-hidden shadow-md bg-white",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"p-3 border",children:"Nombre"}),(0,s.jsx)("th",{className:"p-3 border",children:"Precio"}),(0,s.jsx)("th",{className:"p-3 border",children:"Descripci\xf3n"}),(0,s.jsx)("th",{className:"p-3 border",children:"Imagen"}),(0,s.jsx)("th",{className:"p-3 border",children:"Acciones"})]})}),(0,s.jsx)("tbody",{children:d.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"p-3 border",children:e.name}),(0,s.jsxs)("td",{className:"p-3 border",children:["$",e.price]}),(0,s.jsx)("td",{className:"p-3 border",children:e.description}),(0,s.jsx)("td",{className:"p-3 border",children:e.image?(0,s.jsx)(i.default,{src:e.image,alt:e.name,width:40,height:40,className:"h-10 w-10 rounded object-cover",unoptimized:!0}):(0,s.jsx)("span",{className:"text-gray-400",children:"Sin imagen"})}),(0,s.jsxs)("td",{className:"p-3 border flex gap-2 justify-center",children:[(0,s.jsx)("button",{className:"bg-yellow-400 px-3 py-1 rounded-lg text-xs font-semibold hover:bg-yellow-500 transition-colors",onClick:()=>{g({name:e.name,price:String(e.price),description:e.description||"",image:e.image||"",id:e._id}),b(e._id)},children:"Editar"}),f===e._id?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-red-600",children:"\xbfConfirmar?"}),(0,s.jsx)("button",{className:"bg-red-600 text-white px-3 py-1 rounded-lg text-xs font-semibold hover:bg-red-700 transition-colors",type:"button",onClick:()=>O(e._id),children:"Si"}),(0,s.jsx)("button",{className:"ml-2 bg-gray-300 text-gray-700 px-3 py-1 rounded-lg text-xs font-semibold hover:bg-gray-400 transition-colors",type:"button",onClick:e=>{e.stopPropagation(),j(null)},children:"No"})]}):(0,s.jsx)("button",{className:"bg-red-600 text-white px-3 py-1 rounded-lg text-xs font-semibold hover:bg-red-700 transition-colors",type:"button",onClick:()=>O(e._id),children:"Eliminar"})]})]},e._id))})]})})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center mt-10",children:[(0,s.jsx)("div",{className:"text-red-600 text-4xl mb-6",children:(0,s.jsx)(a.OrW,{})}),(0,s.jsx)("div",{className:"text-red-600 text-xl mb-6",children:"Debes iniciar sesi\xf3n para ver tu historial."}),(0,s.jsx)("button",{className:"bg-[#13B29F] hover:bg-[#119e8d] text-white rounded-xl py-3 px-6 text-lg font-semibold transition-colors",onClick:()=>e.push("/login"),children:"Ir al login"})]})}}},e=>{e.O(0,[8087,2108,6766,8441,5964,7358],()=>e(e.s=5651)),_N_E=e.O()}]);